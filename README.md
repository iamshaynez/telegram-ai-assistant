# Telegram AI Assistant

ä¸€ä¸ªåŸºäº Cloudflare Workers çš„æ™ºèƒ½ Telegram æœºå™¨äººï¼Œæ”¯æŒå¤šç§åº”ç”¨åœºæ™¯çš„è‡ªç„¶è¯­è¨€äº¤äº’ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š è®°è´¦åŠŸèƒ½
- è‡ªç„¶è¯­è¨€è®°å½•æ”¶æ”¯äº¤æ˜“
- æ”¯æŒå¤šè´¦æˆ·å’Œåˆ†ç±»ç®¡ç†
- ä¸ Actual Budget API é›†æˆ

### ğŸŒ ç¿»è¯‘åŠŸèƒ½
- æ”¯æŒå¤šè¯­è¨€ç¿»è¯‘
- æ™ºèƒ½è¯­è¨€æ£€æµ‹
- åŸºäº OpenAI API

### âœ… æ‰“å¡åŠŸèƒ½ (æ–°å¢)
- **æ‰“å¡è®°å½•**: æ”¯æŒå„ç§é¡¹ç›®çš„æ‰“å¡è®°å½•ï¼ˆè¿åŠ¨ã€å­¦ä¹ ã€è¯»ä¹¦ç­‰ï¼‰
- **æŸ¥è¯¢ç»Ÿè®¡**: æŸ¥çœ‹å½“å‰æ‰“å¡æ€»æ•°å’Œè¿›åº¦
- **ç›®æ ‡è®¾ç½®**: è®¾ç½®æ‰“å¡ç›®æ ‡å¹¶è·Ÿè¸ªå®Œæˆæƒ…å†µ
- **å†å²è®°å½•**: æŸ¥çœ‹è¯¦ç»†çš„æ‰“å¡å†å²
- **æ•°æ®ç®¡ç†**: æ”¯æŒé‡ç½®å’Œåˆ é™¤æ‰“å¡æ•°æ®
- **è‡ªç„¶è¯­è¨€**: å®Œå…¨æ”¯æŒä¸­æ–‡è‡ªç„¶è¯­è¨€äº¤äº’

## æ‰“å¡åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ‰“å¡
```
ç”¨æˆ·: è¿åŠ¨æ‰“å¡ï¼Œä»Šå¤©è·‘æ­¥30åˆ†é’Ÿ
æœºå™¨äºº: è¿åŠ¨ æ‰“å¡æˆåŠŸ
        æˆªæ­¢ç›®å‰ è¿åŠ¨ æ‰“å¡æ•°æ€»è®¡ 15 æ¬¡
        è·ç¦»æœ¬æœˆç›®æ ‡è¿˜æœ‰ 15æ¬¡
```

### æŸ¥è¯¢æ‰“å¡
```
ç”¨æˆ·: æŸ¥è¯¢è¿åŠ¨æ‰“å¡
æœºå™¨äºº: æˆªæ­¢ç›®å‰ è¿åŠ¨ æ‰“å¡æ•°æ€»è®¡ 15 æ¬¡
```

### è®¾ç½®ç›®æ ‡
```
ç”¨æˆ·: è®¾ç½®è¿åŠ¨æ‰“å¡ç›®æ ‡30æ¬¡ï¼Œæœ¬æœˆç›®æ ‡
æœºå™¨äºº: è¿åŠ¨ æ‰“å¡ç›®æ ‡è®¾ç½®æˆåŠŸ
        è·ç¦»æœ¬æœˆç›®æ ‡è¿˜æœ‰ 15æ¬¡
```

### æŸ¥çœ‹å†å²
```
ç”¨æˆ·: æŸ¥çœ‹è¿åŠ¨æ‰“å¡å†å²
æœºå™¨äºº: æ‰“å¡å†å²æŸ¥è¯¢æˆåŠŸï¼Œåˆ—è¡¨å¦‚ä¸‹:
        > è¿åŠ¨ | count | 2024-01-15 | è·‘æ­¥30åˆ†é’Ÿ
        > è¿åŠ¨ | count | 2024-01-14 | å¥èº«1å°æ—¶
```

### é‡ç½®æ‰“å¡
```
ç”¨æˆ·: é‡ç½®è¿åŠ¨æ‰“å¡
æœºå™¨äºº: è¿åŠ¨ æ‰“å¡é‡ç½®æˆåŠŸ
        æˆªæ­¢ç›®å‰ è¿åŠ¨ æ‰“å¡æ•°æ€»è®¡ 0 æ¬¡
```

## æŠ€æœ¯æ¶æ„

### AI å¤„ç†æµç¨‹
1. **æ„å›¾è¯†åˆ«**: ä½¿ç”¨ OpenAI API è¯†åˆ«ç”¨æˆ·æ„å›¾
2. **å‚æ•°æå–**: æ ¹æ®æ„å›¾æå–ç›¸å…³å‚æ•°
3. **åº”ç”¨è·¯ç”±**: å°†è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”çš„åº”ç”¨å¤„ç†å™¨
4. **ä¸šåŠ¡å¤„ç†**: æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘
5. **å“åº”ç”Ÿæˆ**: ç”Ÿæˆç”¨æˆ·å‹å¥½çš„å“åº”æ¶ˆæ¯

### æ•°æ®å­˜å‚¨
- **è®°è´¦æ•°æ®**: Actual Budget API
- **æ‰“å¡æ•°æ®**: Cloudflare D1 æ•°æ®åº“
  - `count_log` è¡¨: å­˜å‚¨æ‰“å¡è®°å½•
  - `count_goal` è¡¨: å­˜å‚¨æ‰“å¡ç›®æ ‡

## éƒ¨ç½²é…ç½®

### ç¯å¢ƒå˜é‡
```bash
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
OPENAI_API_KEY=your_openai_api_key
```

### D1 æ•°æ®åº“é…ç½®
åœ¨ `wrangler.toml` ä¸­é…ç½®:
```toml
[[d1_databases]]
binding = "DB"
database_name = "counter"
database_id = "your_database_id"
```

### æ•°æ®åº“è¡¨ç»“æ„
```sql
-- æ‰“å¡è®°å½•è¡¨
CREATE TABLE count_log (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  count_name TEXT NOT NULL,
  count_type TEXT NOT NULL, -- 'count' æˆ– 'reset'
  count_value INTEGER NOT NULL,
  count_date TEXT NOT NULL,
  count_comment TEXT
);

-- æ‰“å¡ç›®æ ‡è¡¨
CREATE TABLE count_goal (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  count_name TEXT NOT NULL UNIQUE,
  goal_comment TEXT,
  goal_value INTEGER NOT NULL
);
```

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘
```bash
npm install
npm run dev
```

### éƒ¨ç½²
```bash
npm run deploy
```

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `src/ai/prompts.js` ä¸­æ·»åŠ æ„å›¾è¯†åˆ«å’Œå‚æ•°æå–æç¤º
2. åœ¨ `src/applications/` ä¸­åˆ›å»ºæ–°çš„åº”ç”¨å¤„ç†å™¨
3. åœ¨ `src/applications/handler.js` ä¸­æ·»åŠ è·¯ç”±
4. æ›´æ–°æ–‡æ¡£å’Œæµ‹è¯•

## è®¸å¯è¯

MIT License